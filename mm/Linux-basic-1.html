<!DOCTYPE html>

<!--(^･ｪ･^)--欢迎来到Hack萌妹学习,人类的进化就靠你了-WWW.HackMM.COM--ฅ•ω•ฅ-->
<!--(^･ｪ･^)--Copyright©HackMM.COM--ฅ•ω•ฅ-->
<!--(^･ｪ･^)--PC端Google和Firefox支持良好,手机端支持良好--ฅ•ω•ฅ-->
<!--(^･ｪ･^)--前进!不择手段的前进!--ฅ•ω•ฅ-->
<!--░░░░░░░░░░▄-->
<!--░░░░░░░░▄▐░▄▄█████▄▄-->
<!--░░░░░░▄█████████████▄▀▄▄░▄▄▄-->
<!--░░░░░█████████████████▄██████-->
<!--░░░░████▐█████▌████████▌█████▌-->
<!--░░░████▌█████▌█░████████▐▀██▀-->
<!--░▄█████░█████▌░█░▀██████▌█▄▄▀▄-->
<!--░▌███▌█░▐███▌▌░░▄▄░▌█▌███▐███░▀-->
<!--▐░▐██░░▄▄▐▀█░░░▐▄█▀▌█▐███▐█-->
<!--  ░░███░▌▄█▌░░▀░░▀██░░▀██████▌-->
<!--░░░▀█▌▀██▀░▄░░░░░░░░░███▐███-->
<!--░░░░██▌░░░░░░░░░░░░░▐███████▌-->
<!--░░░░███░░░░░▀█▀░░░░░▐██▐███▀▌-->
<!--░░░░▌█▌█▄░░░░░░░░░▄▄████▀░▀-->
<!--░░░░░░█▀██▄▄▄░▄▄▀▀▒█▀█░▀-->
<!--░░░░░░░░░▀░▀█▀▌▒▒▒░▐▄▄-->
<!--░░░░░░░░▄▄▀▀▄░░░░░░▄▀░▀▀▄▄-->
<!--░░░░░░▄▀░▄▀▄░▌░░░▄▀░░░░░░▄▀▀▄-->
<!--░░░░░▐▒▄▀▄▀░▌▀▄▄▀░░░░░░▄▀▒▒▒▐-->
<!--░░░░▐▒▒▌▀▄░░░░░▌░░░░▄▄▀▒▐▒▒▒▒▌-->
<!--░░░▐▒▒▐░▌░▀▄░░▄▀▀▄▀▀▒▌▒▐▒▒▒▒▐▐-->
<!--░░░▌▄▀░░░▄▀░█▀▒▒▒▒▀▄▒▌▐▒▒▒▒▒▌▌-->
<!--░░▄▀▒▐░▄▀░░░▌▒▐▒▐▒▒▒▌▀▒▒▒▒▒▐▒▌-->
<!--__  __     ______     ______     __  __     __    __     __    __    -->
<!------░█░█░█▀█░█▀▀░█░█░█▄█░█▄█------>
<!------░█▀█░█▀█░█░░░█▀▄░█░█░█░█------>
<!------░▀░▀░▀░▀░▀▀▀░▀░▀░▀░▀░▀░▀------>

<html lang="zh-cn">
<!--head头包含js和css调用以及站点keywords等等-->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0,minimum-scale=1.0, maximum-scale=1.0,user-scalable=no">
	<meta name="description" content="HackMM,我们的征途,是星辰大海.">
	<meta name="author" content="HackMM.COM-月刃">
	<meta name="keywords" content="hackmm,HackMM,hackmm.com,Hack萌妹,黑客萌妹,黑客学习,Windows技术,Linux技术,Archlinux,Linux软件,漏洞挖掘,网络安全,渗透测试,自动化办公,python全自动办公,Windows系统激活,新手学电脑,IT技术,Rust,Rust编程,黑客技术,黑客,红客,honker,hack,hacker">
	<title>[Linux基础]-1-目录基础命令 - Hack萌妹 - HackMM.COM</title>
	<link rel="shortcut icon" type="image/x-icon" href="../logo/favicon.png">
	<link rel="stylesheet" type="text/css" href="../css/basic.css">
	<link rel="stylesheet" type="text/css" href="../css/text.css">
	<!--prism.js代码高亮模块-->
	<link rel="stylesheet" href="../css/prism.css" data-noprefix />
	<script src="../plugins/prism.js"></script>
	<!--/prism.js代码高亮模块-->
	</script>
</head>
<!--/head结束-->
<body>
	<!--header -->
	<header id="nav">
			<div class="nav-container"> 
				<!--logo和描述-->
				<a href="https://www.hackmm.com" title="HackMM">
					<h1 class="nav-logo">Hack萌妹 - HackMM.COM</h1>
				</a>
				<h2 class="nav-site-description desc-hidden">
					我们的征途是星辰大海
				</h2>
				<!--/logo和描述-->
				<!-- nav导航-->
				<nav class="nav-links">
					<h1 style="display:none;">网站导航</h1> 
					<ul>
						<li class="active li-hidden">
							<a href="../index.html" title="home">
								<span class="link-word"><img src="../logo/home.png" alt="home" class="link-img"><span class="word-hidden">首页</span></span>
							</a>
						</li>
						<li>
							<a href="../sitemap.html" title="sitemap">
								<span class="link-word"><img src="../logo/archives.png" alt="archives" class="link-img"><span class="word-hidden">wiki</span></span>
							</a>
						</li>
					</ul>
				</nav>
				<!--/nav导航-->
			</div>		
	</header>
	<!-- /header -->

	<!-- content-->
	<div id="content">
		<div class="content-container">
			<!-- 文章区 -->
			<article class="text-container">
				<header class="text-header">
					<h1>[Linux基础]-1-目录基础命令</h1>	
				</header>
				<section class="text-body">
					<h2>引言</h2>
					<p>这篇文章记录7个和目录相关的常用Linux命令，也是Linux中最使用频率最高的几个命令，并借ls这个命令，理解Linux中inode以及磁盘存储块的概念。</p>
					<!-- 目录 -->
					<h2>文章目录</h2>
					<ul class="contents">	
						 <li><a href="#Directory-related-commands-0">0×0.理解Sector、Block、Inode、目录文件、Dentry</a></li>
						 <li><a href="#Directory-related-commands-1">0×1.ls列出详细信息</a></li>
						 <li><a href="#Directory-related-commands-2">0×2.cd切换目录</a></li>
						 <li><a href="#Directory-related-commands-3">0×3.pwd查看当前目录</a></li>
						 <li><a href="#Directory-related-commands-4">0×4.rm删除文件或目录</a></li>
						 <li><a href="#Directory-related-commands-5">0×5.rmdir删除目录</a></li>
						 <li><a href="#Directory-related-commands-6">0×6.mv移动目录或文件</a></li>
						 <li><a href="#Directory-related-commands-7">0×7.cp复制目录或文件</a></li>
					 </ul>
					<!-- /目录 -->

					<!-- 正文 -->
					<h2 id="Directory-related-commands-0">0×0.理解磁盘块、Inode、目录文件、目录项</h2>

					<p>首先来看一下磁盘存储单元，扇区（英文名叫Sector）和块（英文名叫Block）的概念：</p>

					<p>我们的数据储存在硬盘上，硬盘的最小存储单位叫做"扇区"，每个扇区储存512字节（差不多0.5KB），操作系统读取硬盘数据的时候，不会一个个扇区地读取，这样效率太低，而是一次性连续读取多个扇区，即一次性读取一个"块"，这种由多个扇区组成的"块"，是文件存取的最小单位，"块"的大小，在Linux的Ext4文件系统中，默认是4KB，即连续八个"扇区"组成一个"块"。</p>

					<p>通过这段描述，我们知道，在Linux的Ext4文件系统中，如果要储存一个文件，系统会根据文件大小从磁盘中分配"块"，例如，小于4KB的文件，系统就只会分配一个"块"，并且所有文件在磁盘中被分配的空间大小，都是4KB的倍数。我们看下图右边就是磁盘中的一个个"快"组成的"块区域"。</p>

					<p>通过上面的了解，我们知道，文件数据都储存在"块"中，那么很显然，除了文件数据，还必须找到一个地方储存文件的元信息，而这种储存文件元信息的区域就叫做inode，英文全称叫做index node，中文译名为"索引节点"，文件的元信息包括文件的创建者、文件的创建访问和修改的日期、文件的大小，文件储存到磁盘的位置信息，这个储存在Inode中的位置信息是一个指针，指向了磁盘中的一个块，就像前面描述的，当文件大小小于4KB的时候，这个指针只指向一个块，但是当文件大于4K的时候，这个指针会指向一个起始块，并且在Inode中也会记录数据占用了多少块。每个inode节点的大小，一般是128字节或256字节，这就是我们看到磁盘格式化之后，能够储存数据的空间大小会小于实际大小的原因之一，因为Inode也会消耗硬盘空间，硬盘格式化的时候，操作系统自动将硬盘划分出这两个区域。一个是数据区，存放文件数据；另一个则是inode区，存放文件的元信息。我们看下面图片中间这一部分就是磁盘中的Inode部分，储存了文件的元信息。</p>

					<p>通过上面的介绍我们知道，Inode中存放了文件的元信息，但是Inode在设计之初，并没有考虑存放文件的文件名信息，那么文件名存在哪呢？现在我们知道，每个inode都有一个编号，Linux系统内部不使用文件名，而是使用inode编号来寻找文件在硬盘中的数据。并且我们还知道，Linux 中最经典的一句话是：「一切皆文件」，那么就意味着，我们看到的文件夹，实际上也是一个个储存在硬盘数据块中的数据文件，而恰巧，设计者将所有文件的文件名都储存在这个“文件夹文件”中，在这个“文件夹文件”中不仅仅储存了文件名，还储存了文件名到Inode的映射关系，这种映射关系，叫做Dentry数据结构，有些中文翻译把它翻译成“目录项”，就是下面图片左边的文件夹中的内容。</p>

					<p>文件夹的Dentry结构中，包含了当前文件夹的名称、当前文件夹名称对应的Inode元信息在磁盘中的位置，以及父目录、所有子目录、子文件的名称和他们对应的Inode元信息在磁盘中的位置。</p>

					<p>这就意味着，当我们"双击进入"或者通过ls命令来查看一个文件夹中的内容的时候，实际上是在读取这个Dentry数据结构中的数据然后展示出来，而系统在初始化的时候，只需要读取硬盘中的Inode区域，通过将Inode区域指向的数据块中的"文件夹文件"中的Dentry结构，缓存到内存中，就能够在内存中绘制出一个完整的系统目录树，但是Linux内核不会去将所有的目录文件的Dentry结构都缓存到内存中，这样内存会爆炸掉，起初它只会缓存使用过的目录，没有打开过的目录不会缓存。</p>

					<p>了解到这里，我们是不是就大概明白了为什么Linux速度会那么块的原因，因为Linux对文件或者文件夹的操作，全部是在内存中对Dentry结构的操作，并不需要频繁的读写硬盘，就像是删除一个文件，其实只是删除文件所在的目录文件中的Dentry结构中这个文件的信息，系统会在空闲或关机时再将变化后的信息从内存写入硬盘数据块中的目录文件内。</p>
					<img src="images/inode-block.png" alt="images/inode-block.png">
					<p>现在是不是觉得，我们眼前的这个操作系统有点黑客帝国似曾相识的味道，我们看到的操作系统图形界面，实际上只是系统为了迎合人类而构造的虚幻而已？怎么样，勇敢的少年，准备好跟着我一起进入字符的世界了吗？</p>

					<h2 id="Directory-related-commands-1">0×1.ls列出详细信息</h2>

					<p>ls命令是list的缩写，用来列出终端所在目录中的文件，ls常用参数列表如下：</p>
					<p class="indent-p">
						ls -a 列出目录所有文件，包含以.开头的隐藏文件<br>
						ls -A 列出除.及..的其它文件<br>
						ls -r 反序排列，配合S和t使用（ls排序默认从大到小，反序之后从小到大）<br>
						ls -t 以文件修改时间排序<br>
						ls -S 以文件大小排序<br>
						ls -h 以易读大小显示（默认文件大小显示为字节，加上h之后显示为k，mb等形式）<br>
						ls -l 详细信息显示，除了文件名之外，还将文件的权限、所有者、文件大小等信息详细列出来<br>
						ls -i 显示每个文件的inode值，inode (index node）
					</p>
					<p>ls命令演示：</p>

					<!--bash-->
					<pre class="command-line" 
						 data-prismjs-copy='复制代码' data-prismjs-copy-success='成功复制！'
					     data-user="mm" 
					     data-host="hackmm.com" 
					     data-output=""> <!--指定哪些行为命令返回的结果，删除[mm@hackmm.com]$前缀-->
					<code class="language-bash">
					ls        #直接列出根目录下的文件和文件夹（在不同终端中，目录和文件夹是以不同的颜色显示的）
					ls -a   #列出所有文件，.代表当前文件夹，..代表当前文件夹的上一层目录
					ls -l    #列表形式，列出文件的详细信息
					ls -alSh #以文件大小排序，用列表形式列出所有文件和文件夹的详细详细，并且以易读的方式显示
					ls -alShr #和上一条命令一样，r参数会将结果反序排列
					ls -alth #以文件修改时间排序，显示目录中文件和文件夹的详细信息
					ls | sed "s:^:`pwd`/:" #列出当前文件夹中所有文件和文件夹的绝对路径
					ls hackmm* #列出所有hackmm开头的文件，*是通配符，代替任意多个字符
					ls -i #列出所有文件和文件夹的inode信息
					ls -il #详细显示文件和文件夹详细，并且包含inode
					</code>
					</pre>

					<h2 id="Directory-related-commands-2">0×2.cd切换目录</h2>

					<p>cd是Change Directory的缩写，意思为改变目录，用于切换终端所在目录：</p>
					<!--bash-->
					<pre class="command-line" 
						 data-prismjs-copy='复制代码' data-prismjs-copy-success='成功复制！'
					     data-user="mm" 
					     data-host="hackmm.com" 
					     data-output=""> <!--指定哪些行为命令返回的结果，删除[mm@hackmm.com]$前缀-->
					<code class="language-bash">
					cd / #切换到根目录
					cd ~ #切换到当前用户的家目录
					cd /home/mm #切换到home目录下的mm家目录
					cd - #切换到上一个目录
					cd !$ #将上一个命令的参数当做cd的参数使用
					</code>
					</pre>


					<h2 id="Directory-related-commands-3">0×3.pwd查看当前目录</h2>

					<p>pwd是Print Working Directory的首字母缩写，用于查看终端当前处在哪个目录内：</p>
					<!--bash-->
					<pre class="command-line" 
						 data-prismjs-copy='复制代码' data-prismjs-copy-success='成功复制！'
					     data-user="mm" 
					     data-host="hackmm.com" 
					     data-output=""> <!--指定哪些行为命令返回的结果，删除[mm@hackmm.com]$前缀-->
					<code class="language-bash">
					pwd #查看当前目录绝对路径
					</code>
					</pre>

					<h2 id="Directory-related-commands-4">0×4.rm删除文件或目录</h2>

					<p>rm是Remove的缩写，用于删除目录或者文件：</p>
					<!--bash-->
					<pre class="command-line" 
						 data-prismjs-copy='复制代码' data-prismjs-copy-success='成功复制！'
					     data-user="mm" 
					     data-host="hackmm.com" 
					     data-output=""> <!--指定哪些行为命令返回的结果，删除[mm@hackmm.com]$前缀-->
					<code class="language-bash">
					rm test.txt #直接删除当前目录下的文件test.txt
					rm /home/mm/test.txt #使用绝对路径，删除mm家目录下的test.txt
					rm -i *.txt #删除当前目录下所有.txt结尾的文件，并且逐个询问如果输入y就删除
					rm -r test_dir #删除目录，需要加-r参数
					rm -r test_dir test.txt 12345.mp4 一次性删除一个文件夹和两个文件
					rm -rf *.log #不询问，强制删除当前目录下的.log结尾的文件
					find . -inum {inode号} -exec rm -rf {} \;   #用inode号来删除当前文件夹下的名称不规则的文件或者文件夹，请将{inode号}替换成ls -i中看到的inode号码
					</code>
					</pre>

					<h2 id="Directory-related-commands-5">0×5.rmdir删除目录</h2>

					<p>rmdir是Remove Directory的缩写，用于删除空目录或者空的目录结构：</p>
					<!--bash-->
					<pre class="command-line" 
						 data-prismjs-copy='复制代码' data-prismjs-copy-success='成功复制！'
					     data-user="mm" 
					     data-host="hackmm.com" 
					     data-output=""> <!--指定哪些行为命令返回的结果，删除[mm@hackmm.com]$前缀-->
					<code class="language-bash">
					rmdir test #如果test是一个空目录，就能直接删除
					rmdir -p test/sub1/sub2 #使用-p参数，如果test下面只有一个sub1，并且sub1下面只有一个sub2，并且都是空目录，就能一并删除
					</code>
					</pre>
					<p>除非用作特殊判断，否则使用rm -rf命令删除目录会方便很多。</p>

					<h2 id="Directory-related-commands-6">0×6.mv移动目录或文件</h2>

					<p>mv是Move的缩写，可以用来移动文件或者将文件改名：</p>
					<!--bash-->
					<pre class="command-line" 
						 data-prismjs-copy='复制代码' data-prismjs-copy-success='成功复制！'
					     data-user="mm" 
					     data-host="hackmm.com" 
					     data-output=""> <!--指定哪些行为命令返回的结果，删除[mm@hackmm.com]$前缀-->
					<code class="language-bash">
					mv hackmm hackmm.com #将hackmm文件改名为hackmm.com
					mv h1 h2/ h3 hk/ #将h1 h2 h3，移动到hk文件夹中，其中h2为文件夹
					mv * hk/ #将当前目录所有文件，移动到hk目录下
					mv -i * ../ #将当前目录所有文件，移动到上一层目录中，如果遇到重名文件，提示是否覆盖
					</code>
					</pre>

					<h2 id="Directory-related-commands-7">0×7.cp复制目录或文件</h2>
					
					<p>cp是Copy的缩写，可以用来复制文件或文件夹：</p>
					<!--bash-->
					<pre class="command-line" 
						 data-prismjs-copy='复制代码' data-prismjs-copy-success='成功复制！'
					     data-user="mm" 
					     data-host="hackmm.com" 
					     data-output=""> <!--指定哪些行为命令返回的结果，删除[mm@hackmm.com]$前缀-->
					<code class="language-bash">
					cp hk1.txt hk2.txt #将hk1.txt复制一份保存为hk2.txt
					cp -a hk1.txt hk2.txt #将hk1.txt复制一份保存为hk2.txt，并且保存hk1.txt的'访问时间'和'修改时间'不变
					cp -r hackmm/ hackmm_com/ #将hackmm目录复制一份保存为hackmm_com目录
					cp -r hackmm/ hk1.txt hk2.txt hackmm_com/ #将前面一个目录和两个文件复制到hackmm_com目录
					cp -i hk1.txt hk2.txt hackmm_com/ #将前面两个文件复制到hackmm_com目录，如果有重名文件提示是否覆盖
					cp -s hk1.txt hk1_link.txt #创建一个连接文件hk1_link.txt，相当于一个快捷方式，打开hk1_link.txt相当于打开hk1.txt
					</code>
					</pre>

					<!-- /正文 -->

				<footer class="text-footer">
					<p>
						*转载请注明来自:<a title="HackMM.COM" style="color: rgb(4,181,150);" href="https://www.HackMM.com" target="_blank">HackMM.COM</a>
					</p>
					<p>*原文连接:<a title="[Linux基础]-1-目录基础命令" style="color: rgb(4,181,150);" href="https://www.HackMM.com/mm/Linux-basic-1.html" target="_blank">https://www.HackMM.com/mm/Linux-basic-1.html</a></p>
				</footer>
			</article>
			<!-- /文章区 -->	
		</div>
	</div>
	<!-- /content -->
	
	<!-- footer -->
	<footer id="footer">
		<div class="footer-container">
			HackMM.COM &nbsp;<img src="../logo/copyright.png" alt="未经作者允许,禁止任何形式的复制与转载" title="未经作者允许,禁止任何形式的复制与转载">&nbsp;All Rights Reserved.
		</div>
	</footer>
	<!-- /footer -->
</body>
</html>